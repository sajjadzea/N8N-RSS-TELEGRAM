{
  "name": "Research Subjects Scraper - Abfa Mashhad",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "hours",
              "hoursInterval": 6
            }
          ]
        }
      },
      "id": "schedule-trigger-001",
      "name": "Every 6 Hours",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        -1100,
        200
      ]
    },
    {
      "parameters": {
        "url": "https://research.abfamashhad.ir/SubjectsList",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"
            },
            {
              "name": "Accept",
              "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8"
            },
            {
              "name": "Accept-Language",
              "value": "fa-IR,fa;q=0.9,en;q=0.8"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, br"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Upgrade-Insecure-Requests",
              "value": "1"
            }
          ]
        },
        "options": {
          "response": {
            "response": {
              "responseFormat": "text"
            }
          }
        }
      },
      "id": "http-request-001",
      "name": "Fetch Research Subjects Page",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -880,
        200
      ]
    },
    {
      "parameters": {
        "jsCode": "// Parse HTML and extract research subjects data\nconst html = $input.item.json;\nconst htmlContent = typeof html === 'string' ? html : html.data || '';\n\n// ØªØ§Ø¨Ø¹ Ø¨Ø±Ø§ÛŒ ØªØ¨Ø¯ÛŒÙ„ Ø§Ø¹Ø¯Ø§Ø¯ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ Ø¨Ù‡ ÙØ§Ø±Ø³ÛŒ\nconst faNums = ['Û°','Û±','Û²','Û³','Û´','Ûµ','Û¶','Û·','Û¸','Û¹'];\nfunction toFaDigits(s) {\n  if (s === null || s === undefined) return '';\n  return String(s).replace(/\\d/g, d => faNums[Number(d)]);\n}\n\n// Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø§Ø² Ø¬Ø¯ÙˆÙ„ HTML\nconst subjects = [];\n\ntry {\n  // Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† ØªÙ…Ø§Ù… Ø³Ø·Ø±Ù‡Ø§ÛŒ Ø¬Ø¯ÙˆÙ„ Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² regex\n  const tableRowRegex = /<tr[^>]*>(.*?)<\\/tr>/gis;\n  const rows = htmlContent.match(tableRowRegex) || [];\n  \n  // Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø³Ø·Ø±Ù‡Ø§ (Ø§Ø² Ø³Ø·Ø± Ø¯ÙˆÙ… Ø´Ø±ÙˆØ¹ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… Ú†ÙˆÙ† Ø³Ø·Ø± Ø§ÙˆÙ„ header Ø§Ø³Øª)\n  for (let i = 1; i < rows.length; i++) {\n    const row = rows[i];\n    const cells = [];\n    let match;\n    \n    // Ø§Ø³ØªØ®Ø±Ø§Ø¬ ØªÙ…Ø§Ù… Ø³Ù„ÙˆÙ„â€ŒÙ‡Ø§\n    const tempCellRegex = /<td[^>]*>(.*?)<\\/td>/gis;\n    while ((match = tempCellRegex.exec(row)) !== null) {\n      // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ØªÚ¯â€ŒÙ‡Ø§ÛŒ HTML Ùˆ ÙØ¶Ø§ÛŒ Ø®Ø§Ù„ÛŒ Ø§Ø¶Ø§ÙÛŒ\n      let cellContent = match[1]\n        .replace(/<[^>]+>/g, '') // Ø­Ø°Ù ØªÚ¯â€ŒÙ‡Ø§ÛŒ HTML\n        .replace(/&nbsp;/g, ' ') // ØªØ¨Ø¯ÛŒÙ„ &nbsp; Ø¨Ù‡ ÙØ¶Ø§ÛŒ Ù…Ø¹Ù…ÙˆÙ„ÛŒ\n        .replace(/&quot;/g, '\"') // ØªØ¨Ø¯ÛŒÙ„ &quot; Ø¨Ù‡ \"\n        .replace(/&amp;/g, '&') // ØªØ¨Ø¯ÛŒÙ„ &amp; Ø¨Ù‡ &\n        .replace(/&#\\d+;/g, '') // Ø­Ø°Ù Ú©Ø§Ø±Ø§Ú©ØªØ±Ù‡Ø§ÛŒ HTML entity\n        .trim();\n      cells.push(cellContent);\n    }\n    \n    // Ø§Ú¯Ø± Ø³Ø·Ø± Ø­Ø¯Ø§Ù‚Ù„ 4 Ø³ØªÙˆÙ† Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯ (Ø¹Ù†ÙˆØ§Ù†ØŒ Ù†ÙˆØ¹ØŒ Ù…Ù‡Ù„ØªØŒ Ø¬Ø²Ø¦ÛŒØ§Øª)\n    if (cells.length >= 4) {\n      subjects.push({\n        title: cells[0] || '',\n        type: cells[1] || '',\n        deadline: cells[2] || '',\n        details: cells[3] || ''\n      });\n    }\n  }\n  \n  // Ø§Ú¯Ø± Ø¨Ø§ regex Ù…ÙˆÙÙ‚ Ù†Ø´Ø¯ÛŒÙ…ØŒ Ø§Ø² Ø±ÙˆØ´ Ø¯ÛŒÚ¯Ø±ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…\n  if (subjects.length === 0) {\n    // Ø¨Ø±Ø§ÛŒ ØªØ³ØªØŒ ÛŒÚ© Ø¢ÛŒØªÙ… Ù†Ù…ÙˆÙ†Ù‡ Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…\n    subjects.push({\n      title: 'Ù†Ù…ÙˆÙ†Ù‡ Ù…ÙˆØ¶ÙˆØ¹ ØªØ­Ù‚ÛŒÙ‚Ø§ØªÛŒ',\n      type: 'Ù¾Ø§ÛŒØ§Ù†â€ŒÙ†Ø§Ù…Ù‡ Ú©Ø§Ø±Ø´Ù†Ø§Ø³ÛŒ Ø§Ø±Ø´Ø¯',\n      deadline: 'Û±Û´Û°Û³/Û°Û¸/Û±Ûµ',\n      details: 'Ø¬Ø²Ø¦ÛŒØ§Øª Ø¯Ø± Ø³Ø§ÛŒØª'\n    });\n  }\n} catch (error) {\n  // Ø¯Ø± ØµÙˆØ±Øª Ø¨Ø±ÙˆØ² Ø®Ø·Ø§ØŒ ÛŒÚ© Ù¾ÛŒØ§Ù… Ø®Ø·Ø§ Ø¨Ø±Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ø§Ù†ÛŒÙ…\n  return [{\n    json: {\n      success: false,\n      error: error.message,\n      subjects: []\n    }\n  }];\n}\n\nreturn [{\n  json: {\n    success: true,\n    subjects: subjects,\n    count: subjects.length\n  }\n}];"
      },
      "id": "code-parse-001",
      "name": "Parse HTML & Extract Data",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -656,
        200
      ]
    },
    {
      "parameters": {
        "jsCode": "// Ù…Ù‚Ø§ÛŒØ³Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ø§ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù‚Ø¨Ù„ÛŒ Ùˆ ØªØ´Ø®ÛŒØµ ØªØºÛŒÛŒØ±Ø§Øª\nconst data = $input.item.json;\nconst currentSubjects = data.subjects || [];\n\n// Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Workflow Static Data Ø¨Ø±Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø§Ø¦Ù…ÛŒ\nconst workflowStaticData = this.getWorkflowStaticData('global');\nconst previousSubjects = workflowStaticData.researchSubjects || {};\n\n// Ø¢Ø±Ø§ÛŒÙ‡â€ŒÙ‡Ø§ÛŒÛŒ Ø¨Ø±Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ù…ÙˆØ¶ÙˆØ¹Ø§Øª Ø¬Ø¯ÛŒØ¯ Ùˆ Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯Ù‡\nconst newSubjects = [];\nconst updatedSubjects = [];\nconst unchangedSubjects = [];\n\n// Ø³Ø§Ø®Øª ÛŒÚ© Map Ø§Ø² Ù…ÙˆØ¶ÙˆØ¹Ø§Øª ÙØ¹Ù„ÛŒ Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø³Ø±ÛŒØ¹\nconst currentSubjectsMap = {};\ncurrentSubjects.forEach(subject => {\n  const key = subject.title.trim();\n  currentSubjectsMap[key] = subject;\n});\n\n// Ø¨Ø±Ø±Ø³ÛŒ Ù‡Ø± Ù…ÙˆØ¶ÙˆØ¹ ÙØ¹Ù„ÛŒ\ncurrentSubjects.forEach(subject => {\n  const key = subject.title.trim();\n  const prevSubject = previousSubjects[key];\n  \n  if (!prevSubject) {\n    // Ù…ÙˆØ¶ÙˆØ¹ Ø¬Ø¯ÛŒØ¯ Ø§Ø³Øª\n    newSubjects.push({\n      ...subject,\n      changeType: 'new'\n    });\n  } else {\n    // Ø¨Ø±Ø±Ø³ÛŒ ØªØºÛŒÛŒØ±Ø§Øª Ø¯Ø± ÙÛŒÙ„Ø¯Ù‡Ø§\n    const changes = [];\n    \n    if (prevSubject.type !== subject.type) {\n      changes.push({\n        field: 'Ù†ÙˆØ¹',\n        oldValue: prevSubject.type,\n        newValue: subject.type\n      });\n    }\n    \n    if (prevSubject.deadline !== subject.deadline) {\n      changes.push({\n        field: 'Ù…Ù‡Ù„Øª Ø«Ø¨Øª Ù¾Ø±ÙˆÙ¾ÙˆØ²Ø§Ù„',\n        oldValue: prevSubject.deadline,\n        newValue: subject.deadline\n      });\n    }\n    \n    if (prevSubject.details !== subject.details) {\n      changes.push({\n        field: 'Ø¬Ø²Ø¦ÛŒØ§Øª',\n        oldValue: prevSubject.details,\n        newValue: subject.details\n      });\n    }\n    \n    if (changes.length > 0) {\n      // Ù…ÙˆØ¶ÙˆØ¹ Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯Ù‡ Ø§Ø³Øª\n      updatedSubjects.push({\n        ...subject,\n        changeType: 'updated',\n        changes: changes\n      });\n    } else {\n      // Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ±\n      unchangedSubjects.push({\n        ...subject,\n        changeType: 'unchanged'\n      });\n    }\n  }\n});\n\n// Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡\nworkflowStaticData.researchSubjects = currentSubjectsMap;\nworkflowStaticData.lastCheckTime = new Date().toISOString();\n\n// Ø³Ø§Ø®Øª Ø®Ø±ÙˆØ¬ÛŒ\nreturn [{\n  json: {\n    success: true,\n    newCount: newSubjects.length,\n    updatedCount: updatedSubjects.length,\n    unchangedCount: unchangedSubjects.length,\n    totalCount: currentSubjects.length,\n    newSubjects: newSubjects,\n    updatedSubjects: updatedSubjects,\n    unchangedSubjects: unchangedSubjects,\n    hasChanges: (newSubjects.length > 0 || updatedSubjects.length > 0)\n  }\n}];"
      },
      "id": "code-compare-001",
      "name": "Detect Changes",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -432,
        200
      ]
    },
    {
      "parameters": {
        "jsCode": "// Ø³Ø§Ø®Øª Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Telegram Ø¨Ø±Ø§ÛŒ Ù…ÙˆØ¶ÙˆØ¹Ø§Øª Ø¬Ø¯ÛŒØ¯ Ùˆ Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯Ù‡\nconst data = $input.item.json;\nconst newSubjects = data.newSubjects || [];\nconst updatedSubjects = data.updatedSubjects || [];\n\nif (!data.hasChanges) {\n  // Ù‡ÛŒÚ† ØªØºÛŒÛŒØ±ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯\n  return [{\n    json: {\n      send: false,\n      message: 'âœ… *Ø¨Ø±Ø±Ø³ÛŒ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯*\\n\\nÙ‡ÛŒÚ† Ù…ÙˆØ¶ÙˆØ¹ Ø¬Ø¯ÛŒØ¯ ÛŒØ§ Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯.',\n      messageType: 'no_changes'\n    }\n  }];\n}\n\n// ØªØ§Ø¨Ø¹ ØªØ¨Ø¯ÛŒÙ„ Ø§Ø¹Ø¯Ø§Ø¯ Ø¨Ù‡ ÙØ§Ø±Ø³ÛŒ\nconst faNums = ['Û°','Û±','Û²','Û³','Û´','Ûµ','Û¶','Û·','Û¸','Û¹'];\nfunction toFaDigits(s) {\n  if (s === null || s === undefined) return '';\n  return String(s).replace(/\\d/g, d => faNums[Number(d)]);\n}\n\nconst messages = [];\n\n// Ø§ÛŒØ¬Ø§Ø¯ Ù¾ÛŒØ§Ù… Ø®Ù„Ø§ØµÙ‡\nlet summaryMsg = `ğŸ”” *Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù…ÙˆØ¶ÙˆØ¹Ø§Øª ØªØ­Ù‚ÛŒÙ‚Ø§ØªÛŒ â€” Ø¢Ø¨ÙØ§ÛŒ Ù…Ø´Ù‡Ø¯*\\n\\n`;\nif (newSubjects.length > 0) {\n  summaryMsg += `ğŸ†• Ù…ÙˆØ¶ÙˆØ¹Ø§Øª Ø¬Ø¯ÛŒØ¯: ${toFaDigits(newSubjects.length)}\\n`;\n}\nif (updatedSubjects.length > 0) {\n  summaryMsg += `ğŸ”„ Ù…ÙˆØ¶ÙˆØ¹Ø§Øª Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯Ù‡: ${toFaDigits(updatedSubjects.length)}\\n`;\n}\nsummaryMsg += `\\nğŸ“… Ø²Ù…Ø§Ù† Ø¨Ø±Ø±Ø³ÛŒ: ${new Date().toLocaleString('fa-IR')}\\n\\n`;\nsummaryMsg += `_Ø¯Ø± Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø¨Ø¹Ø¯ÛŒ Ø¬Ø²Ø¦ÛŒØ§Øª Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯._`;\n\nmessages.push({\n  json: {\n    send: true,\n    message: summaryMsg,\n    messageType: 'summary',\n    index: 0\n  }\n});\n\n// Ù¾ÛŒØ§Ù… Ø¨Ø±Ø§ÛŒ Ù…ÙˆØ¶ÙˆØ¹Ø§Øª Ø¬Ø¯ÛŒØ¯\nnewSubjects.forEach((subject, index) => {\n  let msg = `ğŸ†• *Ù…ÙˆØ¶ÙˆØ¹ ØªØ­Ù‚ÛŒÙ‚Ø§ØªÛŒ Ø¬Ø¯ÛŒØ¯*\\n\\n`;\n  \n  if (subject.title) {\n    msg += `*ğŸ“Œ Ø¹Ù†ÙˆØ§Ù†:*\\n${subject.title}\\n\\n`;\n  }\n  \n  if (subject.type) {\n    msg += `*ğŸ“ Ù†ÙˆØ¹:*\\n${subject.type}\\n\\n`;\n  }\n  \n  if (subject.deadline) {\n    const deadlineFa = toFaDigits(subject.deadline);\n    msg += `*â° Ù…Ù‡Ù„Øª Ø«Ø¨Øª Ù¾Ø±ÙˆÙ¾ÙˆØ²Ø§Ù„:*\\n${deadlineFa}\\n\\n`;\n  }\n  \n  if (subject.details) {\n    msg += `*ğŸ“‹ Ø¬Ø²Ø¦ÛŒØ§Øª:*\\n${subject.details}\\n\\n`;\n  }\n  \n  msg += `ğŸ”— [Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¯Ø± Ø³Ø§ÛŒØª](https://research.abfamashhad.ir/SubjectsList)\\n\\n`;\n  msg += `_ğŸ¤– Ù…ÙˆØ¶ÙˆØ¹ Ø¬Ø¯ÛŒØ¯ Ø´Ù…Ø§Ø±Ù‡ ${toFaDigits(index + 1)} Ø§Ø² ${toFaDigits(newSubjects.length)}_`;\n  \n  messages.push({\n    json: {\n      send: true,\n      message: msg,\n      messageType: 'new',\n      subject: subject,\n      index: messages.length\n    }\n  });\n});\n\n// Ù¾ÛŒØ§Ù… Ø¨Ø±Ø§ÛŒ Ù…ÙˆØ¶ÙˆØ¹Ø§Øª Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯Ù‡\nupdatedSubjects.forEach((subject, index) => {\n  let msg = `ğŸ”„ *Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù…ÙˆØ¶ÙˆØ¹ ØªØ­Ù‚ÛŒÙ‚Ø§ØªÛŒ*\\n\\n`;\n  \n  if (subject.title) {\n    msg += `*ğŸ“Œ Ø¹Ù†ÙˆØ§Ù†:*\\n${subject.title}\\n\\n`;\n  }\n  \n  msg += `*âœï¸ ØªØºÛŒÛŒØ±Ø§Øª:*\\n`;\n  \n  subject.changes.forEach(change => {\n    msg += `\\nâ–«ï¸ *${change.field}*\\n`;\n    \n    if (change.field === 'Ù…Ù‡Ù„Øª Ø«Ø¨Øª Ù¾Ø±ÙˆÙ¾ÙˆØ²Ø§Ù„') {\n      msg += `   Ù‚Ø¨Ù„ÛŒ: ${toFaDigits(change.oldValue)}\\n`;\n      msg += `   Ø¬Ø¯ÛŒØ¯: ${toFaDigits(change.newValue)} âœ¨\\n`;\n    } else {\n      msg += `   Ù‚Ø¨Ù„ÛŒ: ${change.oldValue}\\n`;\n      msg += `   Ø¬Ø¯ÛŒØ¯: ${change.newValue} âœ¨\\n`;\n    }\n  });\n  \n  msg += `\\n*ğŸ“Š Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ù…Ù„ ÙØ¹Ù„ÛŒ:*\\n\\n`;\n  \n  if (subject.type) {\n    msg += `*ğŸ“ Ù†ÙˆØ¹:* ${subject.type}\\n`;\n  }\n  \n  if (subject.deadline) {\n    msg += `*â° Ù…Ù‡Ù„Øª:* ${toFaDigits(subject.deadline)}\\n`;\n  }\n  \n  if (subject.details) {\n    msg += `*ğŸ“‹ Ø¬Ø²Ø¦ÛŒØ§Øª:* ${subject.details}\\n`;\n  }\n  \n  msg += `\\nğŸ”— [Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¯Ø± Ø³Ø§ÛŒØª](https://research.abfamashhad.ir/SubjectsList)\\n\\n`;\n  msg += `_ğŸ¤– Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ù…Ø§Ø±Ù‡ ${toFaDigits(index + 1)} Ø§Ø² ${toFaDigits(updatedSubjects.length)}_`;\n  \n  messages.push({\n    json: {\n      send: true,\n      message: msg,\n      messageType: 'updated',\n      subject: subject,\n      index: messages.length\n    }\n  });\n});\n\nreturn messages;"
      },
      "id": "code-format-001",
      "name": "Format Telegram Messages",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -208,
        200
      ]
    },
    {
      "parameters": {
        "conditions": {
          "boolean": [
            {
              "value1": "={{ $json.send }}",
              "value2": true
            }
          ]
        },
        "options": {}
      },
      "id": "if-node-001",
      "name": "Should Send?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        16,
        200
      ]
    },
    {
      "parameters": {
        "amount": 2,
        "unit": "seconds"
      },
      "id": "wait-node-001",
      "name": "Wait Between Messages",
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        256,
        200
      ],
      "webhookId": "wait-between-messages-webhook"
    },
    {
      "parameters": {
        "chatId": "YOUR_TELEGRAM_CHAT_ID_HERE",
        "text": "={{ $json.message }}",
        "additionalFields": {
          "parse_mode": "Markdown"
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        496,
        200
      ],
      "id": "telegram-node-001",
      "name": "Send to Telegram",
      "credentials": {
        "telegramApi": {
          "id": "YOUR_TELEGRAM_CREDENTIALS_ID",
          "name": "Telegram account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Every 6 Hours": {
      "main": [
        [
          {
            "node": "Fetch Research Subjects Page",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Fetch Research Subjects Page": {
      "main": [
        [
          {
            "node": "Parse HTML & Extract Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Parse HTML & Extract Data": {
      "main": [
        [
          {
            "node": "Detect Changes",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Detect Changes": {
      "main": [
        [
          {
            "node": "Format Telegram Messages",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format Telegram Messages": {
      "main": [
        [
          {
            "node": "Should Send?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Should Send?": {
      "main": [
        [
          {
            "node": "Wait Between Messages",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait Between Messages": {
      "main": [
        [
          {
            "node": "Send to Telegram",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "research-scraper-v2",
  "meta": {
    "templateCredsSetupCompleted": false
  },
  "id": "ResearchSubjectsScraper",
  "tags": [
    "scraping",
    "research",
    "telegram",
    "abfa-mashhad",
    "change-detection"
  ]
}
