# ุฑุงูููุง ุฑุงูโุงูุฏุงุฒ Workflow ูุธุงุฑุช ุจุฑ ุงุฎุจุงุฑ ุขุจ ููุทููโุง ุฎุฑุงุณุงู ุฑุถู

## ๐ ูพุดโูุงุฒูุง

1. **n8n**: ูุตุจ ู ุฑุงูโุงูุฏุงุฒ ุดุฏู ุจุงุดุฏ
2. **Telegram Bot**: ฺฉ ุฑุจุงุช ุชูฺฏุฑุงู ุงุฌุงุฏ ฺฉุฑุฏู ุจุงุดุฏ
3. **ScrapingDog API**: API key ุฏุงุดุชู ุจุงุดุฏ (ุดูุง ุงุฒ ุงู API key ุงุณุชูุงุฏู ูโฺฉูุฏ: `69058214d82e9728cf02226b`)

---

## ๐ ูุฑุงุญู ุฑุงูโุงูุฏุงุฒ

### ูุฑุญูู 1: Import ฺฉุฑุฏู Workflow

1. ูุงู `Water_Authority_Khorasan_Search.json` ุฑุง ุจุงุฒ ฺฉูุฏ
2. ุฏุฑ n8nุ ุจู ููู **Workflows** ุจุฑูุฏ
3. ุฑู **Import from File** ฺฉูฺฉ ฺฉูุฏ
4. ูุงู JSON ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ

### ูุฑุญูู 2: ุชูุธู Telegram Bot

#### 2.1. ุงุฌุงุฏ Bot Token (ุงฺฏุฑ ูุฏุงุฑุฏ)

1. ุฏุฑ ุชูฺฏุฑุงู ุจู [@BotFather](https://t.me/botfather) ูพุงู ุฏูุฏ
2. ุฏุณุชูุฑ `/newbot` ุฑุง ุงุฑุณุงู ฺฉูุฏ
3. ูุงู ู username ุจุฑุง ุฑุจุงุช ุงูุชุฎุงุจ ฺฉูุฏ
4. Token ุฏุฑุงูุช ฺฉูุฏ (ูุซุงู: `123456789:ABCdefGHIjklMNOpqrsTUVwxyz`)

#### 2.2. ุฏุฑุงูุช Chat ID

ุฑูุด 1 - ุงุณุชูุงุฏู ุงุฒ Bot:
1. ุจู ุฑุจุงุช ุฎูุฏ ูพุงู ุฏูุฏ (ูุฑ ูพุงูุ ูุซูุงู `/start`)
2. ุจู ุงู ุขุฏุฑุณ ุจุฑูุฏ: `https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getUpdates`
3. ุฏุฑ ูพุงุณุฎุ ุนุฏุฏ `"id"` ุฏุฑ ูุณูุช `"chat"` ุฑุง ูพุฏุง ฺฉูุฏ

ุฑูุด 2 - ุงุณุชูุงุฏู ุงุฒ @userinfobot:
1. ุจู [@userinfobot](https://t.me/userinfobot) ุฏุฑ ุชูฺฏุฑุงู ูพุงู ุฏูุฏ
2. Chat ID ุฎูุฏ ุฑุง ุฏุฑุงูุช ฺฉูุฏ

#### 2.3. ุชูุธู Credentials ุฏุฑ n8n

1. ุฏุฑ n8nุ ุจู **Settings โ Credentials** ุจุฑูุฏ
2. **New Credential** โ **Telegram API** ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ
3. ููุงุฏุฑ ุฒุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ:
   - **Credential Name**: `Telegram - Water Authority Bot`
   - **Access Token**: Token ุฏุฑุงูุช ุงุฒ BotFather
4. ุฑู **Save** ฺฉูฺฉ ฺฉูุฏ

### ูุฑุญูู 3: ูพฺฉุฑุจูุฏ Workflow

#### 3.1. ุชูุธู ููุฏ "Send to Telegram"

1. ููุฏ **Send to Telegram** ุฑุง ุจุงุฒ ฺฉูุฏ
2. ููุฏูุง ุฒุฑ ุฑุง ุชูุธู ฺฉูุฏ:
   - **Credential for Telegram API**: Credential ุงุฌุงุฏ ุดุฏู ุฏุฑ ูุฑุญูู 2.3 ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ
   - **Chat ID**: Chat ID ุฏุฑุงูุช ุงุฒ ูุฑุญูู 2.2 ุฑุง ูุงุฑุฏ ฺฉูุฏ

#### 3.2. ุจุฑุฑุณ ุชูุธูุงุช API (ุงุฎุชุงุฑ)

ููุฏ **Search Water Authority News**:
- **API Key**: `69058214d82e9728cf02226b` (ุงุฒ ูุจู ุชูุธู ุดุฏู)
- **Query**: `ุขุจ ููุทููโุง ุฎุฑุงุณุงู ุฑุถู`
- **Results**: `50` (ุญุฏุงฺฉุซุฑ 50 ูุชุฌู)
- **Page**: `0` (ุตูุญู ุงูู)
- **Timeout**: 60 ุซุงูู
- **Retry**: 3 ุจุงุฑ ุฏุฑ ุตูุฑุช ุฎุทุง

### ูุฑุญูู 4: ุชุณุช Workflow

1. ุฑู **Execute Workflow** ฺฉูฺฉ ฺฉูุฏ
2. ุจุฑุฑุณ ฺฉูุฏ ฺฉู ูุฑ ููุฏ ุจู ุฏุฑุณุช ุงุฌุฑุง ุดูุฏ
3. ุฏุฑ ุชูฺฏุฑุงู ุจุงุฏ ูพุงูโูุง ุฒุฑ ุฑุง ุฏุฑุงูุช ฺฉูุฏ:
   - ูพุงู ุฎูุงุตู (ุณุณุชู ุฑุงูโุงูุฏุงุฒ ุดุฏ)
   - 10 ุฎุจุฑ ุงูู (ุฏุฑ ุงููู ุงุฌุฑุง)
   - ูพุงู ุชูุฌู (ุงฺฏุฑ ุจุด ุงุฒ 10 ูุชุฌู ุจุงุดุฏ)

### ูุฑุญูู 5: ูุนุงูโุณุงุฒ Workflow

1. ุจุงูุง ุตูุญูุ ุณูฺ **Active** ุฑุง ุฑูุดู ฺฉูุฏ
2. Workflow ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ูุฑ 6 ุณุงุนุช ุงุฌุฑุง ูโุดูุฏ

---

## โ๏ธ ุชูุธูุงุช ูพุดุฑูุชู

### ุชุบุฑ ุฒูุงูโุจูุฏ ุงุฌุฑุง

ููุฏ **Every 6 Hours**:
- ูโุชูุงูุฏ ุงุฒ 6 ุณุงุนุช ุจู ุฒูุงู ุฏูุฎูุงู ุชุบุฑ ุฏูุฏ (ูุซูุงู 3ุ 12ุ 24 ุณุงุนุช)

### ุชุบุฑ ุชุนุฏุงุฏ ูุชุงุฌ

ููุฏ **Search Water Authority News** โ Query Parameters โ `results`:
- ููุฏุงุฑ ูพุดโูุฑุถ: `50`
- ูุญุฏูุฏู ูุฌุงุฒ: 1 ุชุง 100

### ุชุบุฑ ฺฉููุงุช ุฌุณุชุฌู

ููุฏ **Search Water Authority News** โ Query Parameters โ `query`:
- ููุฏุงุฑ ูุนู: `ุขุจ ููุทููโุง ุฎุฑุงุณุงู ุฑุถู`
- ูโุชูุงูุฏ ฺฉููุงุช ฺฉูุฏ ุฏฺฏุฑ ุงุถุงูู ฺฉูุฏ

### ููุชุฑ ฺฉุฑุฏู ูุชุงุฌ ุจุฑ ุงุณุงุณ ุชุงุฑุฎ

ุฏุฑ ููุฏ **Parse Search Results**ุ ูโุชูุงูุฏ ููุชุฑูุง ุชุงุฑุฎ ุงุถุงูู ฺฉูุฏ:

```javascript
// ููุชุฑ ูุชุงุฌ ุขุฎุฑ 24 ุณุงุนุช
const yesterday = new Date();
yesterday.setDate(yesterday.getDate() - 1);

const filteredResults = processedResults.filter(result => {
  if (result.date) {
    const resultDate = new Date(result.date);
    return resultDate >= yesterday;
  }
  return true; // ุงฺฏุฑ ุชุงุฑุฎ ูุฏุงุดุชุ ูฺฏู ุฏุงุฑ
});
```

---

## ๐ ุนุจโุงุจ

### ูพุงู ุฏุฑ ุชูฺฏุฑุงู ุฏุฑุงูุช ููโุดูุฏ

1. **ุจุฑุฑุณ Bot Token**:
   - Token ุฑุง ุฏุฑ [@BotFather](https://t.me/botfather) ุชุฃุฏ ฺฉูุฏ
   - ูุทูุฆู ุดูุฏ ุฏุฑ Credentials ุจู ุฏุฑุณุช ูุงุฑุฏ ุดุฏู

2. **ุจุฑุฑุณ Chat ID**:
   - ูุทูุฆู ุดูุฏ Chat ID ุตุญุญ ุงุณุช
   - ุงฺฏุฑ ุงุฒ ฺฏุฑูู ุงุณุชูุงุฏู ูโฺฉูุฏุ Chat ID ุจุงุฏ ุจุง `-` ุดุฑูุน ุดูุฏ

3. **ุจุฑุฑุณ ูุงฺฏโูุง Workflow**:
   - ุฏุฑ n8nุ ุจู **Executions** ุจุฑูุฏ
   - ุขุฎุฑู ุงุฌุฑุง ุฑุง ุจุงุฒ ฺฉูุฏ
   - ุฎุทุงูุง ุฑุง ุจุฑุฑุณ ฺฉูุฏ

### API ุฎุทุง ูโุฏูุฏ

1. **ุจุฑุฑุณ API Key**:
   - ูุทูุฆู ุดูุฏ API key ูุนุชุจุฑ ุงุณุช
   - ุฏุฑ [ScrapingDog Dashboard](https://scrapingdog.com/dashboard) ุจุฑุฑุณ ฺฉูุฏ

2. **ุจุฑุฑุณ ูุญุฏูุฏุชโูุง**:
   - ููฺฉู ุงุณุช ุจู ุณูู ุงุณุชูุงุฏู ุฑุณุฏู ุจุงุดุฏ
   - ุฏุฑ Dashboard ุชุนุฏุงุฏ API calls ุจุงููุงูุฏู ุฑุง ุจุจูุฏ

3. **ุจุฑุฑุณ ููุฏ Check API Response**:
   - ุงู ููุฏ ุฎุทุงูุง API ุฑุง ููุงุด ูโุฏูุฏ
   - ูุงฺฏโูุง console ุฑุง ุจุฑุฑุณ ฺฉูุฏ

### ูุชุงุฌ ุฌุณุชุฌู ุฎุงู ุงุณุช

1. **ุชุบุฑ ูพุงุฑุงูุชุฑูุง ุฌุณุชุฌู**:
   - ฺฉููุงุช ฺฉูุฏ ุฑุง ุณุงุฏูโุชุฑ ฺฉูุฏ
   - ุงุฒ ฺฉููุงุช ุงูฺฏูุณ ูู ุงูุชุญุงู ฺฉูุฏ

2. **ุญุฐู ููุชุฑูุง ฺฉุดูุฑ/ุฒุจุงู**:
   - ูพุงุฑุงูุชุฑูุง `country` ู `language` ุฑุง ุญุฐู ฺฉูุฏ
   - ููุท `query` ู `results` ุฑุง ูฺฏู ุฏุงุฑุฏ

---

## ๐ ุณุงุฎุชุงุฑ Workflow

```
Every 6 Hours (Trigger)
  โ
Search Water Authority News (HTTP Request)
  โ
Check API Response (Validation)
  โ
Parse Search Results (Processing)
  โ
Detect New Results (Change Detection)
  โ
Format Telegram Messages (Formatting)
  โ
Should Send Message? (Filter)
  โ
Wait Between Messages (Delay)
  โ
Send to Telegram (Output)
```

---

## ๐ก ูฺฉุงุช ููู

1. **ุงุฌุฑุง ุงูู**: ุฏุฑ ุงููู ุงุฌุฑุงุ ููุท 10 ุฎุจุฑ ุงูู ููุงุด ุฏุงุฏู ูโุดูุฏ
2. **ุชุดุฎุต ุชุบุฑุงุช**: Workflow ุงุฒ ุญุงูุธู ุฏุงุฎู ุจุฑุง ุชุดุฎุต ุงุฎุจุงุฑ ุฌุฏุฏ ุงุณุชูุงุฏู ูโฺฉูุฏ
3. **ูุงุตูู ุจู ูพุงูโูุง**: ุจู ูุฑ ูพุงู 2 ุซุงูู ูุงุตูู ุงุณุช ุชุง ุงุฒ ูุญุฏูุฏุช ุชูฺฏุฑุงู ุฌููฺฏุฑ ุดูุฏ
4. **Retry**: ุฏุฑ ุตูุฑุช ุฎุทุง APIุ ุชุง 3 ุจุงุฑ ุชูุงุด ูุฌุฏุฏ ูโุดูุฏ

---

## ๐ ุงููุช

- **API Key**: ุฏุฑ ูุญุท productionุ API key ุฑุง ุจู ุตูุฑุช Environment Variable ุฐุฎุฑู ฺฉูุฏ
- **Credentials**: Telegram credentials ุฏุฑ n8n ุจู ุตูุฑุช ุงูู ุฑูุฒูฺฏุงุฑ ูโุดูุฏ
- **Chat ID**: ููุท ุจู Chat ID ุฎูุฏ ูพุงู ุงุฑุณุงู ฺฉูุฏ

---

## ๐ ูพุดุชุจุงู

ุฏุฑ ุตูุฑุช ุจุฑูุฒ ูุดฺฉู:
1. ูุงฺฏโูุง Workflow ุฑุง ุจุฑุฑุณ ฺฉูุฏ
2. Documentation ScrapingDog ุฑุง ูุทุงูุนู ฺฉูุฏ: https://docs.scrapingdog.com
3. Documentation n8n ุฑุง ุจุจูุฏ: https://docs.n8n.io

---

**ุขุฎุฑู ุจูโุฑูุฒุฑุณุงู**: ููุงูุจุฑ 2025
**ูุณุฎู Workflow**: 1.1
